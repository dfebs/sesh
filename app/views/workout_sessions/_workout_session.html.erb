<%= render "layouts/flash" %>
<h1><%= link_to "Workout Session #{workout_session.id}", workout_session_path(workout_session) %></h1>
<h2>Add workout</h2>

<div id="<%= dom_id(workout_session, :workouts) %>">
  <%= render "workout_instances/workout_instances", workout_instances: workout_session.workout_instances %>
</div>

<%= link_to "Add Workout Instance", 
  new_workout_session_workout_instance_path(workout_session),
  data: { turbo_frame: combined_dom_id(workout_session, WorkoutInstance.new) } 
%>

<%= turbo_frame_tag combined_dom_id(workout_session, WorkoutInstance.new) %>

<% if workout_session.completed? %>
  <p>Session completed on <%= workout_session.date_completed %></p>
<% else %>
  <% if workout_session.ready_for_completion? %>
    <%= render "workout_sessions/form", workout_session: workout_session %>
  <% else %>
    <p>This workout session is not ready for completion. Be sure to have at least workout instance. All workout instances must have at least one set.</p>
  <% end %>
<% end %>

<h2><%= workout_session.user.email_address %></h2>
